# Format:
## JSON format example:
```
    "MSP_API_VERSION": {
        "code": 1,
        "mspv": 1,
        "request": null,
        "reply": {
            "payload": [
                {
                    "name": "mspProtocolVersion",
                    "ctype": "uint8_t",
                    "units": "",
                    "desc": "MSP Protocol version (`MSP_PROTOCOL_VERSION`, typically 0)."
                },
                {
                    "name": "apiVersionMajor",
                    "ctype": "uint8_t",
                    "units": "",
                    "desc": "INAV API Major version (`API_VERSION_MAJOR`)."
                },
                {
                    "name": "apiVersionMinor",
                    "ctype": "uint8_t",
                    "units": "",
                    "desc": "INAV API Minor version (`API_VERSION_MINOR`)."
                }
            ],
        },
        "notes": "Used by configurators to check compatibility.",
        "description": "Provides the MSP protocol version and the INAV API version."
    },
```
## Message fields:
**name**: MSP message name\
**code**: Integer message code\
**description**: String with description of message\
**notes**: String with details of message\
**request**: null or dict of data sent\
**reply**: null or dict of data received\
**variable_len**: Optional boolean, if true, message does not have a predefined fixed length and needs appropriate handling\
**complex**: Optional boolean, if true, message is one of those special cases that isn't defined here yet\
**variants**: Optional special case, message has different cases of reply/request

## Data dict fields:
**payload**: Array of payload fields\
**repeating**: Optional Special Case, integer or string of how many times the *entire* payload is repeated\

## Payload fields:
### Fields:
**name**: field name from code\
**ctype**: C value type\
**desc**: Optional string with description and details of field\
**units**: Optional defined units\
**enum**: Optional string of enum struct if value is an enum
**array**: Optional boolean to denote field is array of more values\
**array_ctype**: If array, string to describe type of each element\
**array_size**: If array, Integer OR String to define array size, 0 if undefined, string is unparseable (ie: probably needs to be corrected)\
**repeating**: Optional Special case, contains array of more payload fields that are added Times * Key\
**payload**: If repeating, contains more payload fields\
**polymorph**: Optional boolean Special case, field does not have a defined C type\

Simple value
```
{
    "name": "mspProtocolVersion",
    "ctype": "uint8_t",
    "units": "",
    "desc": "MSP Protocol version (`MSP_PROTOCOL_VERSION`, typically 0)."
},
```
Fixed length array
```
{
    "name": "fcVariantIdentifier",
    "ctype": "char[4]",
    "desc": "4-character identifier string (e.g., \"INAV\"). Defined by `flightControllerIdentifier",
    "array": true,
    "array_ctype": "char",
    "array_size": 4,
    "units": ""
}
```
Undefined length array
```
{
    "name": "firmwareChunk",
    "ctype": "uint8_t[]",
    "desc": "Chunk of firmware data",
    "array": true,
    "array_ctype": "uint8_t",
    "array_size": 0,
}
```
As of yet unknown length array
```
{
    "name": "elementText",
    "ctype": "char[]",
    "desc": "Static text bytes, not NUL-terminated"
    "array": true,
    "array_ctype": "char",
    "array_size": "OSD_CUSTOM_ELEMENT_TEXT_SIZE - 1"
}
```
Nested array
```
{
    "repeating": "maxVehicles",
    "payload": [
        {
            "name": "adsbVehicle",
            "ctype": "adsbVehicle_t[]",
            "desc": "Array of `adsbVehicle_t` Repeated `maxVehicles` times",
            "repeating": "maxVehicles",
            "array": true,
            "array_ctype": "adsbVehicle_t",
            "array_size": 0,
            "units": ""
        }
    ]
}
```


### Keys: 
**id**: Message code\
**request**: Message payload to FC. If empty, no payload\
**reply**: Message payload from FC, If empty, no payload\
**complex**: Weird polymorphic message that is a problem for future me


### Keys: 
**id**: Message code\
**request**: Message payload to FC. If empty, no payload\
**reply**: Message payload from FC, If empty, no payload\
**complex**: Weird polymorphic message that is a problem for future me

## Messages to fix:
- MSP_SET_VTX_CONFIG
- MSP2_COMMON_SET_SETTING
- MSP2_SENSOR_HEADTRACKER
- MSP2_INAV_TIMER_OUTPUT_MODE (variable request)

## Unnamed or undefined Enums

| `rthAltControlMode` | `uint8_t` | 1 | Enum | Sets `navConfigMutable()->general.flags.rth_alt_control_mode`. |
sbufWriteU8(dst, navConfig()->general.flags.rth_alt_control_mode);
enum {
    NAV_RTH_NO_ALT                       = 0, // Maintain current altitude
    NAV_RTH_EXTRA_ALT                    = 1, // Maintain current altitude + predefined safety margin
    NAV_RTH_CONST_ALT                    = 2, // Climb/descend to predefined altitude
    NAV_RTH_MAX_ALT                      = 3, // Track maximum altitude and climb to it when RTH
    NAV_RTH_AT_LEAST_ALT                 = 4, // Climb to predefined altitude if below it
    NAV_RTH_AT_LEAST_ALT_LINEAR_DESCENT  = 5, // Climb to predefined altitude if below it,
                                              // descend linearly to reach home at predefined altitude if above it
}; <--- UNNAMED ENUM!


| `userControlMode` | `uint8_t` | 1 | Enum | Sets `navConfigMutable()->general.flags.user_control_mode`. |
    sbufWriteU8(dst, navConfig()->general.flags.user_control_mode);
enum {
    NAV_GPS_ATTI    = 0,                    // Pitch/roll stick controls attitude (pitch/roll lean angles)
    NAV_GPS_CRUISE  = 1                     // Pitch/roll stick controls velocity (forward/right speed)
};

radar_pois.state 
// 0=undefined, 1=armed, 2=lost
// state 2 means POI has been lost and must be skipped

commCapabilities in MSP_BOARD_INFO